<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>设置我的密码</title>
    <link rel="stylesheet" href="../../../../static/users/css/layui.css">
    <link rel="stylesheet" href="../../../../static/users/css/user.css">
</head>
<body>

<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">修改密码</div>
                <div class="layui-card-body form-wrapper" pad15>

                    <span id="message" hidden>{% if message %}{{ message }}{% endif %}</span>
                    <form class="layui-form" method="post" action="" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="layui-form-item">
                            <label class="layui-form-label">当前密码</label>
                            <div class="layui-input-inline fieldWrapper">
                                {{ form.old_password }}
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">新密码</label>
                            <div class="layui-input-inline fieldWrapper">
                                {{ form.password1 }}
                                <span id="password1error" hidden>{{ form.password1.errors }}</span>
                            </div>
                            <div class="layui-form-mid layui-word-aux">6到20个字符</div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">确认新密码</label>
                            <div class="layui-input-inline fieldWrapper">
                                {{ form.password2 }}
                                <span id="password2error" hidden>{{ form.password2.errors }}</span>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block button-wrapper submit">
                                <button class="layui-btn" lay-submit>确认修改</button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

<script src="../../../../static/users/js/layui.js"></script>
<script>
    layui.use(['form', 'layer'], function () {
        var form = layui.form;
        var $ = layui.$;
        var layer = layui.layer;

        if ($("#password1error").html() !== '') {
            layer.tips($("#password1error").html(), '#id_password1', {
                tips: [2, '#FF5722'],
                tipsMore: true
            });
        }

        if ($("#password2error").html() !== '') {
            layer.tips($("#password2error").html(), '#id_password2', {
                tips: [2, '#FF5722'],
                tipsMore: true
            });
        }

        if ($("#message").html() !== '') {
            layer.msg($("#message").html(),{
                anim: 6
            });
        }
    })
</script>
</body>
</html>